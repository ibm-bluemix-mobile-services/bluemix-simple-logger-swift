os:
  - linux
  - osx
language: generic
env:
  global:
  - SWIFT_VERSION=DEVELOPMENT-SNAPSHOT-2016-06-20-a
branches:
  only:
    - master
    - development
sudo: required
dist: trusty
osx_image: xcode8
install:
  - eval "$(cat ./install-swiftenv.sh)"
script:
  - swift build --clean # clean built artifacts if present
  - swift package fetch # clones all dependencies
  - swift build -Xcc -fblocks -Xlinker -rpath -Xlinker $(pwd)/.build/debug/ # build project
  - swift test #run tests
